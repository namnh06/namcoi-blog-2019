!function(l,n){var i=l(document);n.updates.installExtension=function(e){var a=l(".plugin-card-"+e.slug),s=a.find(".install-now");return e=_.extend({success:n.updates.installExtensionSuccess,error:n.updates.installExtensionError},e),s.html()!==n.updates.l10n.installing&&s.data("originaltext",s.html()),s.addClass("updating-message").attr("aria-label",n.updates.l10n.pluginInstallingLabel.replace("%s",s.data("name"))).text(n.updates.l10n.installing),n.a11y.speak(n.updates.l10n.installingMsg,"polite"),a.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),i.trigger("wp-extension-installing",e),n.updates.ajax("everest_forms_install_extension",e)},n.updates.installExtensionSuccess=function(e){var a=l(".plugin-card-"+e.slug).find(".install-now"),s=l(".plugin-card-"+e.slug).find(".status-label");a.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",n.updates.l10n.pluginInstalledLabel.replace("%s",e.pluginName)).text(n.updates.l10n.pluginInstalled),n.a11y.speak(n.updates.l10n.installedMsg,"polite"),i.trigger("wp-plugin-install-success",e),e.activateUrl&&setTimeout(function(){s.removeClass("status-install-now").addClass("status-active").text(n.updates.l10n.pluginInstalled),a.removeClass("install-now installed button-disabled updated-message").addClass("activate-now button-primary").attr("href",e.activateUrl).attr("aria-label",n.updates.l10n.activatePluginLabel.replace("%s",e.pluginName)).text(n.updates.l10n.activatePlugin)},1e3)},n.updates.installExtensionError=function(e){var a,s=l(".plugin-card-"+e.slug),t=s.find(".install-now");n.updates.isValidResponse(e,"install")&&(n.updates.maybeHandleCredentialError(e,"everest_forms_install_extension")||(a=n.updates.l10n.installFailed.replace("%s",e.errorMessage),s.addClass("plugin-card-update-failed").append('<div class="notice notice-error notice-alt is-dismissible"><p>'+a+"</p></div>"),s.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){s.removeClass("plugin-card-update-failed").find(".column-name a").focus()},200)}),t.removeClass("updating-message").addClass("button-disabled").attr("aria-label",n.updates.l10n.pluginInstallFailedLabel.replace("%s",t.data("name"))).text(n.updates.l10n.installFailedShort),n.a11y.speak(a,"assertive"),i.trigger("wp-plugin-install-error",e)))},n.updates.queueChecker=function(){var e;if(!n.updates.ajaxLocked&&n.updates.queue.length){switch((e=n.updates.queue.shift()).action){case"everest_forms_install_extension":n.updates.installExtension(e.data)}i.trigger("wp-updates-queue-job",e)}},l(function(){l("#extension-filter").on("click",".extension-install .install-now",function(e){var a=l(e.target),s=l(this).data("name");e.preventDefault(),a.hasClass("updating-message")||a.hasClass("button-disabled")||(n.updates.shouldRequestFilesystemCredentials&&!n.updates.ajaxLocked&&(n.updates.requestFilesystemCredentials(e),i.on("credential-modal-cancel",function(){l(".install-now.updating-message").removeClass("updating-message").text(n.updates.l10n.installNow).attr("aria-label",n.updates.l10n.pluginInstallNowLabel.replace("%s",s)),n.a11y.speak(n.updates.l10n.updateCancel,"polite")})),n.updates.installExtension({name:s,slug:a.data("slug")}))})})}(jQuery,window.wp);